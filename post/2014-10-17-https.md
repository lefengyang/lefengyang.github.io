#对https的一点理解

最近做了一个管理后台。为了加强安全性，于是自己用openssl生成了一个证书，走https访问。

于是在chrome中访问的时候，会弹出这个信息：

<img src="images/thread/https.png" />

运营MM就问我，到底https安全不安全呀？为什么chrome会说不安全？

于是问题就来了：<span style="color:red;font-weight:bold;font-size:16px;">https跟http的差别在哪里？到底哪个更安全？原理是什么？</span>

我们先从网络传输说起。我们想象中的网络传输，貌似是将数据从一台终端传送到另一台终端上去。但实际上是否如此呢？非也。现实中的网络传输是采用广播的形式，同一个局域网内的所有终端其实都能收到这个数据包。但是网卡会根据数据的MAC地址来判断是否发给自己的包，进而决定是接收还是忽略。

既然同一个网络内的所有机器都能收到数据包，那就意味着这里有安全问题：只要黑客悄悄接入到该网络中，就可以监听到该网络内所有用户的数据通讯了。对于明文传输的http协议来说，根本无防范的方法。你提交的用户名密码，都会被黑客看到。

为了应对网络黑客监听网络，有没有什么解决方法呢？数学家、密码学家和计算机科学家们发明了不对称加密算法来解决这个问题。不对称加密是什么意思呢？我觉得你应该多少有听说过两个名词——“**私钥**”和“**公钥**”。

##公钥
公钥的作用是加密数据。但是公钥不具备加密功能。

##私钥
私钥可以用来加密数据、生成公钥，以及解密。

在拿不到私钥的情况下，要通过计算机解出密文成本非常高。记得好像是科研用的巨型计算机也得算上数百年才能解出来。

有了非对称加密技术后，接下来的事情就容易理解了。用户在访问一个https网站前，网站会将公钥发给用户。公钥谁都可以获得，黑客也可以拿到。但是由于公钥不能用于解密，因此用户的信息用公钥加密后，黑客是解不出明文内容的。只能眼睁睁地看着数据包在网络间传输而毫无办法。而私钥是保存在https服务器内部，外部是拿不到的。因此只有它自己能解出用户发送的内容。

因此，我可以肯定的说，<span style="color:red;font-weight:bold;font-size:16px;">https比http更安全</span>

接下来讨论第二个问题：

<span style="color:red;font-weight:bold;font-size:16px;">为什么chrome提示我们的URL不安全？</span>

这是因为证书是有一个逐级认证的关系的。只有经过可信任链认证过的证书，才认为是安全的（**当然，这个是要钱的**）。如果你不愿意花钱，那也可以自己生成一个证书，但在系统中就会被标记为不信任的证书。为什么要这么做呢？因为谁都可以生成证书的话，那黑客也可以。黑客也有可能用https来钓鱼。因此非信任的证书，在chrome中就会有提示。

解决方案看这里：《<a href="http://jingyan.baidu.com/album/ae97a646b3aeb7bbfd461d9a.html">解决chrome出现您的连接不是私密的问题</a>》

